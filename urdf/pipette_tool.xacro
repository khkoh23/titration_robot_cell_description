<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="https://ros.org/wiki/xacro">
  <xacro:macro name="pipette_tool" params="
  ur_type
  connected_to
  ">
    <xacro:property name="pipette_tool_offset" value="0.111" />
    <xacro:property name="pipette_tip_offset" value="0.119" />
    <xacro:property name="tcp_offset" value="0.001" />

    <link name="${ur_type}_pipette_tool">
      <visual>
        <geometry>
          <mesh filename="package://titration_robot_cell_description/meshes/one200.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <origin rpy="${-pi/2} 0 ${-pi/2}" xyz="0 0 0"/>
        <material name="grey"/>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://titration_robot_cell_description/meshes/one200.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <origin rpy="${-pi/2} 0 ${-pi/2}" xyz="0 0 0"/>
      </collision>
    </link>

    <link name="${ur_type}_pipette_tip">
      <visual>
        <geometry>
          <mesh filename="package://titration_robot_cell_description/meshes/pipette_tip.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <origin rpy="${-pi/2} 0 0" xyz="0 0 0"/>
        <material name="white"/>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://titration_robot_cell_description/meshes/pipette_tip.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <origin rpy="${-pi/2} 0 0" xyz="0 0 0"/>
      </collision>
    </link>

    <link name="${ur_type}_tcp"/>

    <joint name="${ur_type}_pipette_tool_joint" type="fixed">
      <parent link="${ur_type}_${connected_to}"/>
      <child link="${ur_type}_pipette_tool"/>
      <origin xyz="0 0 ${pipette_tool_offset}" rpy="0 0 0"/>
    </joint>

    <joint name="${ur_type}_pipette_tip_joint" type="fixed">
      <parent link="${ur_type}_pipette_tool"/>
      <child link="${ur_type}_pipette_tip"/>
      <origin xyz="0 0 ${pipette_tip_offset}" rpy="0 0 0"/>
    </joint>

    <joint name="${ur_type}_tcp_joint" type="fixed">
      <parent link="${ur_type}_pipette_tip"/>
      <child link="${ur_type}_tcp"/>
      <origin xyz="0 0 ${tcp_offset}" rpy="0 0 0"/>
    </joint>

  </xacro:macro>
</robot>
